<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>work with groups ¬∑ Manifolds.jl</title><meta name="title" content="work with groups ¬∑ Manifolds.jl"/><meta property="og:title" content="work with groups ¬∑ Manifolds.jl"/><meta property="twitter:title" content="work with groups ¬∑ Manifolds.jl"/><meta name="description" content="Documentation for Manifolds.jl."/><meta property="og:description" content="Documentation for Manifolds.jl."/><meta property="twitter:description" content="Documentation for Manifolds.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/><link href="../../assets/citations.css" rel="stylesheet" type="text/css"/><link href="../../assets/link-icons.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img class="docs-light-only" src="../../assets/logo.png" alt="Manifolds.jl logo"/><img class="docs-dark-only" src="../../assets/logo-dark.png" alt="Manifolds.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Manifolds.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">How to...</span><ul><li><a class="tocitem" href="../getstarted/">üöÄ Get Started with <code>Manifolds.jl</code></a></li><li><a class="tocitem" href="../working-in-charts/">work in charts</a></li><li><a class="tocitem" href="../hand-gestures/">perform Hand gesture analysis</a></li><li><a class="tocitem" href="../integration/">integrate on manifolds and handle probability densities</a></li><li><a class="tocitem" href="../exploring-curvature/">explore curvature without coordinates</a></li><li class="is-active"><a class="tocitem" href>work with groups</a><ul class="internal"><li><a class="tocitem" href="#Introduction:-group-of-rotations-on-a-plane"><span>Introduction: group of rotations on a plane</span></a></li><li><a class="tocitem" href="#Relationship-between-groups,-metrics-and-connections"><span>Relationship between groups, metrics and connections</span></a></li><li><a class="tocitem" href="#Literature"><span>Literature</span></a></li></ul></li></ul></li><li><span class="tocitem">Manifolds</span><ul><li><input class="collapse-toggle" id="menuitem-3-1" type="checkbox"/><label class="tocitem" for="menuitem-3-1"><span class="docs-label">Basic manifolds</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../manifolds/centeredmatrices/">Centered matrices</a></li><li><a class="tocitem" href="../../manifolds/choleskyspace/">Cholesky space</a></li><li><a class="tocitem" href="../../manifolds/circle/">Circle</a></li><li><a class="tocitem" href="../../manifolds/elliptope/">Elliptope</a></li><li><a class="tocitem" href="../../manifolds/essentialmanifold/">Essential manifold</a></li><li><a class="tocitem" href="../../manifolds/euclidean/">Euclidean</a></li><li><a class="tocitem" href="../../manifolds/fixedrankmatrices/">Fixed-rank matrices</a></li><li><a class="tocitem" href="../../manifolds/flag/">Flag</a></li><li><a class="tocitem" href="../../manifolds/generalizedstiefel/">Generalized Stiefel</a></li><li><a class="tocitem" href="../../manifolds/generalizedgrassmann/">Generalized Grassmann</a></li><li><a class="tocitem" href="../../manifolds/grassmann/">Grassmann</a></li><li><a class="tocitem" href="../../manifolds/hamiltonian/">Hamiltonian</a></li><li><a class="tocitem" href="../../manifolds/heisenberg/">Heisenberg matrices</a></li><li><a class="tocitem" href="../../manifolds/hyperbolic/">Hyperbolic space</a></li><li><a class="tocitem" href="../../manifolds/hyperrectangle/">Hyperrectangle</a></li><li><a class="tocitem" href="../../manifolds/invertible/">Invertible matrices</a></li><li><a class="tocitem" href="../../manifolds/lorentz/">Lorentzian manifold</a></li><li><a class="tocitem" href="../../manifolds/multinomialdoublystochastic/">Multinomial doubly stochastic matrices</a></li><li><a class="tocitem" href="../../manifolds/multinomial/">Multinomial matrices</a></li><li><a class="tocitem" href="../../manifolds/multinomialsymmetric/">Multinomial symmetric matrices</a></li><li><a class="tocitem" href="../../manifolds/multinomialsymmetricpositivedefinite/">Multinomial symmetric positive definite matrices</a></li><li><a class="tocitem" href="../../manifolds/oblique/">Oblique manifold</a></li><li><a class="tocitem" href="../../manifolds/probabilitysimplex/">Probability simplex</a></li><li><a class="tocitem" href="../../manifolds/positivenumbers/">Positive numbers</a></li><li><a class="tocitem" href="../../manifolds/projectivespace/">Projective space</a></li><li><a class="tocitem" href="../../manifolds/generalunitary/">Orthogonal and Unitary Matrices</a></li><li><a class="tocitem" href="../../manifolds/rotations/">Rotations</a></li><li><a class="tocitem" href="../../manifolds/segre/">Segre</a></li><li><a class="tocitem" href="../../manifolds/shapespace/">Shape spaces</a></li><li><a class="tocitem" href="../../manifolds/skewhermitian/">Skew-Hermitian matrices</a></li><li><a class="tocitem" href="../../manifolds/spectrahedron/">Spectrahedron</a></li><li><a class="tocitem" href="../../manifolds/sphere/">Sphere</a></li><li><a class="tocitem" href="../../manifolds/stiefel/">Stiefel</a></li><li><a class="tocitem" href="../../manifolds/symmetric/">Symmetric matrices</a></li><li><a class="tocitem" href="../../manifolds/symmetricpositivedefinite/">Symmetric positive definite</a></li><li><a class="tocitem" href="../../manifolds/spdfixeddeterminant/">SPD, fixed determinant</a></li><li><a class="tocitem" href="../../manifolds/symmetricpsdfixedrank/">Symmetric positive semidefinite fixed rank</a></li><li><a class="tocitem" href="../../manifolds/symplecticgrassmann/">Symplectic Grassmann</a></li><li><a class="tocitem" href="../../manifolds/symplectic/">Symplectic matrices</a></li><li><a class="tocitem" href="../../manifolds/symplecticstiefel/">Symplectic Stiefel</a></li><li><a class="tocitem" href="../../manifolds/torus/">Torus</a></li><li><a class="tocitem" href="../../manifolds/tucker/">Tucker</a></li><li><a class="tocitem" href="../../manifolds/spheresymmetricmatrices/">Unit-norm symmetric matrices</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-2" type="checkbox"/><label class="tocitem" for="menuitem-3-2"><span class="docs-label">Combined manifolds</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../manifolds/fiber_bundle/">Fiber bundle</a></li><li><a class="tocitem" href="../../manifolds/graph/">Graph manifold</a></li><li><a class="tocitem" href="../../manifolds/power/">Power manifold</a></li><li><a class="tocitem" href="../../manifolds/product/">Product manifold</a></li><li><a class="tocitem" href="../../manifolds/vector_bundle/">Vector bundle</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-3" type="checkbox"/><label class="tocitem" for="menuitem-3-3"><span class="docs-label">Manifold decorators</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../manifolds/connection/">Connection manifold</a></li><li><a class="tocitem" href="../../manifolds/group/">Group manifold</a></li><li><a class="tocitem" href="../../manifolds/metric/">Metric manifold</a></li><li><a class="tocitem" href="../../manifolds/quotient/">Quotient manifold</a></li></ul></li></ul></li><li><span class="tocitem">Features on Manifolds</span><ul><li><a class="tocitem" href="../../features/atlases/">Atlases and charts</a></li><li><a class="tocitem" href="../../features/differentiation/">Differentiation</a></li><li><a class="tocitem" href="../../features/distributions/">Distributions</a></li><li><a class="tocitem" href="../../features/group_actions/">Group actions</a></li><li><a class="tocitem" href="../../features/integration/">Integration</a></li><li><a class="tocitem" href="../../features/statistics/">Statistics</a></li><li><a class="tocitem" href="../../features/testing/">Testing</a></li><li><a class="tocitem" href="../../features/utilities/">Utilities</a></li></ul></li><li><span class="tocitem">Miscellanea</span><ul><li><a class="tocitem" href="../../misc/about/">About</a></li><li><a class="tocitem" href="../../misc/NEWS/">Changelog</a></li><li><a class="tocitem" href="../../misc/CONTRIBUTING/">Contributing</a></li><li><a class="tocitem" href="../../misc/internals/">Internals</a></li><li><a class="tocitem" href="../../misc/notation/">Notation</a></li><li><a class="tocitem" href="../../misc/references/">References</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">How to...</a></li><li class="is-active"><a href>work with groups</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>work with groups</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaManifolds/Manifolds.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands">ÔÇõ</span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaManifolds/Manifolds.jl/blob/master/docs/src/tutorials/groups.md" title="Edit source on GitHub"><span class="docs-icon fa-solid">ÔÅÑ</span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="work-with-groups"><a class="docs-heading-anchor" href="#work-with-groups">work with groups</a><a id="work-with-groups-1"></a><a class="docs-heading-anchor-permalink" href="#work-with-groups" title="Permalink"></a></h1><ul><li><a href="#introduction-group-of-rotations-on-a-plane">Introduction: group of rotations on a plane</a><ul><li><a href="#from-coordinates">From Coordinates</a></li><li><a href="#to-coordinates">To Coordinates</a></li><li><a href="#actions-and-operations">Actions and Operations</a></li></ul></li><li><a href="#relationship-between-groups-metrics-and-connections">Relationship between groups, metrics and connections</a></li><li><a href="#literature">Literature</a></li></ul><p>This is a short overview of group support in <a href="https://juliamanifolds.github.io/Manifolds.jl/"><code>Manifolds.jl</code></a> and how to get started working with them.</p><p>Groups currently available in <code>Manifolds.jl</code> are listed in <a href="../../manifolds/group/#GroupManifoldSection">group section</a>.</p><p>You can read more about the theory of Lie groups for example in [<a href="../../misc/references/#Chirikjian:2012">Chi12</a>]. An example application of Lie groups in robotics is described in [<a href="../../misc/references/#SolaDerayAtchuthan:2021">SDA21</a>].</p><p>First, let‚Äôs load libraries we will use. <a href="https://github.com/SciML/RecursiveArrayTools.jl"><code>RecursiveArrayTools.jl</code></a> is necessary because its <code>ArrayPartition</code> is used as one of the possible representations of elements of product and semidirect product groups. <a href="https://github.com/JuliaArrays/StaticArrays.jl"><code>StaticArrays.jl</code></a> can be used to speed up some operations.</p><pre><code class="language-julia hljs">using Manifolds, RecursiveArrayTools, StaticArrays</code></pre><h2 id="Introduction:-group-of-rotations-on-a-plane"><a class="docs-heading-anchor" href="#Introduction:-group-of-rotations-on-a-plane">Introduction: group of rotations on a plane</a><a id="Introduction:-group-of-rotations-on-a-plane-1"></a><a class="docs-heading-anchor-permalink" href="#Introduction:-group-of-rotations-on-a-plane" title="Permalink"></a></h2><p>Let‚Äôs first consider an example of the group of rotations of a plane, <span>$\operatorname{SO}(2)$</span>. They can be represented in several ways, for example as angles of rotation (which corresponds to <a href="../../manifolds/group/#Manifolds.RealCircleGroup"><code>RealCircleGroup</code></a>), unit complex numbers (<a href="../../manifolds/group/#Manifolds.CircleGroup"><code>CircleGroup</code></a>), or rotation matrices (<a href="../../manifolds/group/#Manifolds.SpecialOrthogonal"><code>SpecialOrthogonal</code></a>). Let‚Äôs consider the last representation since it is the most nontrivial one and can be more easily generalized to other groups.</p><p>The associated manifolds and groups are defined by:</p><pre><code class="language-julia hljs">G = SpecialOrthogonal(2)
M = base_manifold(G)
@assert M === Rotations(2)</code></pre><p>This duality (Lie group and the underlying manifold being separate) is a common pattern in <code>Manifolds.jl</code>. The group <code>G</code> can be used for both Lie group-specific operations and metric-specific operation, while the manifold <code>M</code> only allows using manifold and metric operations. This way groups can be specialized in ways not relevant to plain manifolds, and if someone doesn‚Äôt use the groups structure, they don‚Äôt have to consider it by just using the manifold.</p><p>Some basic definitions</p><pre><code class="language-julia hljs"># default basis
B = DefaultOrthogonalBasis()
# Identity rotation
p0 = @SMatrix [1.0 0; 0 1]

# Group identity element of a special type
IG = Identity(G)</code></pre><pre><code class="nohighlight hljs">Identity(MultiplicationOperation)</code></pre><p>Let‚Äôs say we want to define a manifold point <code>p_i</code> some rotation Œ∏ from the <a href="../../manifolds/group/#Manifolds.identity_element-Tuple{AbstractDecoratorManifold, Any}"><code>identity_element</code></a> reference rotation <code>p0</code> (another point on the manifold that we will use as reference)</p><pre><code class="language-julia hljs"># + radians rotation from x-axis on plane to point i
xŒ∏i = œÄ/6</code></pre><pre><code class="nohighlight hljs">0.5235987755982988</code></pre><h3 id="From-Coordinates"><a class="docs-heading-anchor" href="#From-Coordinates">From Coordinates</a><a id="From-Coordinates-1"></a><a class="docs-heading-anchor-permalink" href="#From-Coordinates" title="Permalink"></a></h3><p>To get our first Lie algebra element we can use the <a href="../../manifolds/group/#ManifoldsBase.hat-Union{Tuple{O}, Tuple{ManifoldsBase.TraitList{&lt;:IsGroupManifold{O}}, AbstractDecoratorManifold, Identity{O}, Any}} where O&lt;:AbstractGroupOperation"><code>hat</code></a> function which is commonly used in robotics, or equivalently a more generalized <a href="../../manifolds/generalunitary/#ManifoldsBase.get_vector-Tuple{Manifolds.GeneralUnitaryMatrices{&lt;:Any, ‚Ñù}, Vararg{Any}}"><code>get_vector</code></a>, function:</p><pre><code class="language-julia hljs">X_ = hat(G, IG, xŒ∏i)              # specific definition to Lie algebras
xXi = get_vector(G, p0, xŒ∏i, B)   # generalized definition beyond Lie algebras
println(xXi)
@assert isapprox(X_, xXi)</code></pre><pre><code class="nohighlight hljs">[0.0 -0.5235987755982988; 0.5235987755982988 0.0]</code></pre><p>Note that <code>hat</code> here assumes a default (orthogonal) basis for the more general <code>get_vector</code>.</p><blockquote><p><strong>Note</strong></p><p>In this case, the same would work given the base manifold <a href="../../manifolds/rotations/#Manifolds.Rotations"><code>Rotations(2)</code></a>:</p><pre><code class="language-julia hljs">_X_ = hat(M, p0, xŒ∏i)             # Lie groups definition
_X = get_vector(M, p0, xŒ∏i, B)   # generalized definition
@assert _X_ == xXi; @assert _X == xXi</code></pre><p>One more caveat here is that for the Rotation matrices, the tangent vectors are always stored as elements from the Lie algebra.</p></blockquote><p>Now, we can transform this algebra element to a point on the manifold using the exponential map <a href="../../manifolds/choleskyspace/#Base.exp-Tuple{CholeskySpace, Vararg{Any}}"><code>exp</code></a>:</p><pre><code class="language-julia hljs">xRi = exp(G, p0, xXi)
# similarly for known underlying manifold
xRi_ = exp(M, p0, xXi)

@assert isapprox(xRi, xRi_)</code></pre><h3 id="To-Coordinates"><a class="docs-heading-anchor" href="#To-Coordinates">To Coordinates</a><a id="To-Coordinates-1"></a><a class="docs-heading-anchor-permalink" href="#To-Coordinates" title="Permalink"></a></h3><p>The logarithmic map transforms elements of the group back to its Lie algebra:</p><pre><code class="language-julia hljs">xXi_ = log(G, p0, xRi)
xXi__ = log(M, p0, xRi)
@assert xXi ‚âà xXi__</code></pre><p>Similarly, the coordinate values can be extracted from the algebra elements using <a href="../../manifolds/group/#ManifoldsBase.vee-Union{Tuple{O}, Tuple{ManifoldsBase.TraitList{&lt;:IsGroupManifold{O}}, AbstractDecoratorManifold, Identity{O}, Any}} where O&lt;:AbstractGroupOperation"><code>vee</code></a>, or using the more generalized <a href="../../manifolds/circle/#ManifoldsBase.get_coordinates-Tuple{Circle{‚ÑÇ}, Any, Any, DefaultOrthonormalBasis{&lt;:Any, TangentSpaceType}}"><code>get_coordinates</code></a>:</p><pre><code class="language-julia hljs"># extracting coordinates using vee
xŒ∏i__ = vee(G, p0, xXi_)[1]
_xŒ∏i__ = vee(M, p0, xXi_)[1]

# OR, the preferred generalized get_coordinate function
xŒ∏i_ = get_coordinates(G, p0, xXi_, B)[1]
_xŒ∏i_ = get_coordinates(M, p0, xXi_, B)[1]

# confirm all versions are correct
@assert isapprox(xŒ∏i, xŒ∏i_); @assert isapprox(xŒ∏i, _xŒ∏i_)
@assert isapprox(xŒ∏i, xŒ∏i__); @assert isapprox(xŒ∏i, _xŒ∏i__)</code></pre><h3 id="Actions-and-Operations"><a class="docs-heading-anchor" href="#Actions-and-Operations">Actions and Operations</a><a id="Actions-and-Operations-1"></a><a class="docs-heading-anchor-permalink" href="#Actions-and-Operations" title="Permalink"></a></h3><p>With the basics in hand on how to move between the coordinate, algebra, and group representations, let‚Äôs briefly look at composition and application of points on the manifold. For example, a <a href="../../manifolds/rotations/#Rotations"><code>Rotations</code></a> manifold is the mathematical representation, but the points have an application purpose in retaining information regarding a specific rotation.</p><p>Points from a Lie group may have an associated action (i.e.¬†a rotation) which we <a href="../../features/group_actions/#Manifolds.apply-Tuple{AbstractGroupAction, Any, Any}"><code>apply</code></a>. Consider rotating through <code>Œ∏ = œÄ/6</code> three vectors <code>V</code> from their native domain <code>Euclidean(2)</code>, from the reference point <code>a</code> to a new point <code>b</code>. Engineering disciplines sometimes refer to the action of a manifold point <code>a</code> or <code>b</code> as reference frames. More generally, by taking the tangent space at point <code>p</code>, we are defining a local coordinate frame with basis <code>B</code>, and should not be confused with ‚Äúreference frame‚Äù <code>a</code> or <code>b</code>.</p><p>Keeping with our two-dimensional example above:</p><pre><code class="language-julia hljs">aV1 = [1; 0]
aV2 = [0; 1]
aV3 = [10; 10]

A_left = RotationAction(Euclidean(2), G)

bŒ∏a = œÄ/6
bXa = get_vector(base_manifold(G), p0, bŒ∏a, B)

bRa = exp(G, p0, bXa)

for aV in [aV1; aV2; aV3]
    bV = apply(A_left, bRa, aV)
    # test we are getting the rotated vectors in Euclidean(2) as expected
    @assert isapprox(bV[1], norm(aV) * cos(bŒ∏a))
    @assert isapprox(bV[2], norm(aV) * sin(bŒ∏a))
end</code></pre><blockquote><p><strong>Note</strong></p><p>In general, actions are usually non-commutative and the user must therefore be aware whether they want to use <a href="../../manifolds/group/#Manifolds.LeftAction"><code>LeftAction</code></a> or <a href="../../manifolds/group/#Manifolds.RightAction"><code>RightAction</code></a>. In this case, the default <code>LeftAction()</code> is used.</p></blockquote><p>Finally, the actions (i.e.¬†points from a manifold) can be <a href="../../manifolds/group/#Manifolds.compose-Tuple{AbstractDecoratorManifold, Vararg{Any}}"><code>compose</code></a>d together. Consider putting together two rotations <code>aRb</code> and <code>bRc</code> such that a single composite rotation <code>aRc</code> is found. The next bit of code composes five rotations of <code>œÄ/4</code> increments:</p><pre><code class="language-julia hljs">A_left = RotationAction(M, G)
aRi = copy(p0)

iŒ∏i_ = œÄ/4
x_Œ∏ = get_vector(M, p0, iŒ∏i_, B) #hat(Rn, R0, Œ∏)
iRi_ = exp(M, p0, x_Œ∏)

# do 5 times over:
# Ri_ = Ri*iRi_
for i in 1:5
    aRi = compose(A_left, aRi, iRi_)
end

# drop back to a algebra, then coordinate
aXi = log(G, p0, aRi)
aŒ∏i = get_coordinates(G, p0, aXi, B)

# should wrap around to 3rd quadrant of xy-plane
@assert isapprox(-3œÄ/4, aŒ∏i[1])</code></pre><blockquote><p><strong>Warning</strong></p><p><code>compose</code> or <code>apply</code> must be done with group (not algebra) elements. This example shows how these two element types can easily be confused, since both the manifold group and algebra elements can have exactly the same data storage type ‚Äì i.e.¬†a 2x2 matrix.</p></blockquote><p>As a last note, other rotation representations, including quaternions, Pauli matrices, etc., have similar features. A contrasting example in rotations, however, are Euler angles which can also store rotation information but quickly becomes problematic with familiar problems such as <a href="https://en.wikipedia.org/wiki/Gimbal_lock">‚Äúgimbal-lock‚Äù</a>.</p><h2 id="Relationship-between-groups,-metrics-and-connections"><a class="docs-heading-anchor" href="#Relationship-between-groups,-metrics-and-connections">Relationship between groups, metrics and connections</a><a id="Relationship-between-groups,-metrics-and-connections-1"></a><a class="docs-heading-anchor-permalink" href="#Relationship-between-groups,-metrics-and-connections" title="Permalink"></a></h2><p>Group structure provides a canonical way to define <a href="https://en.wikipedia.org/wiki/Exponential_map_(Lie_theory)">exponential</a> and logarithmic maps from the Lie algebra. They can be calculated in <code>Manifolds.jl</code> using the <a href="../../manifolds/group/#Manifolds.exp_lie-Tuple{AbstractManifold, Any}"><code>exp_lie</code></a> and <a href="../../manifolds/group/#Manifolds.log_lie-Tuple{AbstractDecoratorManifold, Any}"><code>log_lie</code></a> functions. Such exponential and logarithmic maps can be extended invariantly to tangent spaces at any point of the Lie group. This extension is implemented using functions <a href="../../manifolds/group/#Manifolds.exp_inv"><code>exp_inv</code></a> and <a href="../../manifolds/group/#Manifolds.log_inv-Tuple{AbstractManifold, Any, Any}"><code>log_inv</code></a>.</p><p>Finally, there are <code>log</code> and <code>exp</code> functions which are metric (or connection)-related functions in <code>Manifolds.jl</code>. For groups which can be equipped with a bi-invariant metric, <code>log</code> and <code>log_inv</code> return the same result, similarly <code>exp</code> and <code>exp_inv</code>. However, only compact groups and their products with Euclidean spaces can have a bi-invariant metric (see for example Theorem 21.9 in [<a href="../../misc/references/#GallierQuaintance:2020">GQ20</a>]). A prominent example of a Lie group without a bi-invariant metric is the special Euclidean group (in two or more dimensions). Then we have a choice between a metric but non-invariant exponential map (which is generally the default choice for <code>exp</code>) or a non-metric, invariant exponential map (<code>exp_inv</code>). Which one should be used depends on whether being metric or being invariant is more important in a particular application.</p><pre><code class="language-julia hljs">G = SpecialEuclidean(2)
p = ArrayPartition([1.0, -1.0], xRi)
X = ArrayPartition([2.0, -3.0], aXi)
q_m = exp(G, p, X)
println(q_m)
q_i = exp_inv(G, p, X)
println(q_i)</code></pre><pre><code class="nohighlight hljs">ArrayPartition{Float64, Tuple{Vector{Float64}, SMatrix{2, 2, Float64, 4}}}(([3.0, -4.0], [-0.25881904510252124 0.9659258262890682; -0.9659258262890682 -0.25881904510252124]))
ArrayPartition{Float64, Tuple{Vector{Float64}, MMatrix{2, 2, Float64, 4}}}(([0.8121200537878321, -3.8212723543456155], [-0.25881904510252124 0.9659258262890682; -0.9659258262890682 -0.25881904510252124]))</code></pre><p>As we can see, the results differ. We can observe the invariance as follows:</p><pre><code class="language-julia hljs">p2 = ArrayPartition([2.0, -1.0], xRi)
q1_m = exp(G, translate(G, p2, p), translate_diff(G, p2, p, X))
q2_m = translate(G, p2, exp(G, p, X))
println(isapprox(q1_m, q2_m))

q1_i = exp_inv(G, translate(G, p2, p), translate_diff(G, p2, p, X))
q2_i = translate(G, p2, exp_inv(G, p, X))
println(isapprox(q1_i, q2_i))</code></pre><pre><code class="nohighlight hljs">false
true</code></pre><p>Now, <code>q1_m</code> and <code>q2_m</code> are different due to non-invariance of the metric connection but <code>q1_i</code> and <code>q2_i</code> are equal due to invarianced of <code>exp_inv</code>.</p><p>The following table outlines invariance of <code>exp</code> and <code>log</code> of various groups.</p><table><tr><th style="text-align: left">Group</th><th style="text-align: left">Zero torsion connection</th><th style="text-align: center">Invariant</th></tr><tr><td style="text-align: left"><code>ProductGroup</code></td><td style="text-align: left">Product of connections in each submanifold</td><td style="text-align: center">üü°<sup class="footnote-reference"><a id="citeref-1" href="#footnote-1">[1]</a></sup></td></tr><tr><td style="text-align: left"><code>SemidirectProductGroup</code></td><td style="text-align: left">Same as underlying product</td><td style="text-align: center">‚ùå</td></tr><tr><td style="text-align: left"><code>TranslationGroup</code></td><td style="text-align: left"><code>CartanSchoutenZero</code></td><td style="text-align: center">‚úÖ</td></tr><tr><td style="text-align: left"><code>CircleGroup</code></td><td style="text-align: left"><code>CartanSchoutenZero</code></td><td style="text-align: center">‚úÖ</td></tr><tr><td style="text-align: left"><code>GeneralLinearGroup</code></td><td style="text-align: left">Metric connection from the left invariant metric induced from the standard basis on the Lie algebra</td><td style="text-align: center">‚ùå</td></tr><tr><td style="text-align: left"><code>GeneralUnitaryMultiplicationGroup</code></td><td style="text-align: left"><code>CartanSchoutenZero</code> (explicitly)</td><td style="text-align: center">‚úÖ</td></tr><tr><td style="text-align: left"><code>HeisenbergGroup</code></td><td style="text-align: left"><code>CartanSchoutenZero</code></td><td style="text-align: center">‚úÖ</td></tr><tr><td style="text-align: left"><code>SpecialLinearGroup</code></td><td style="text-align: left">Same as <code>GeneralLinear</code></td><td style="text-align: center">‚ùå</td></tr></table><h2 id="Literature"><a class="docs-heading-anchor" href="#Literature">Literature</a><a id="Literature-1"></a><a class="docs-heading-anchor-permalink" href="#Literature" title="Permalink"></a></h2><div class="citation noncanonical"><dl><dt>[Chi12]</dt><dd><div>G.¬†S.¬†Chirikjian. <a href="https://link.springer.com/book/10.1007/978-0-8176-4944-9"><em>Stochastic Models, Information Theory, and Lie Groups, Volume 2</em></a>. 1¬†Edition, Vol.¬†2 of <em>Applied and Numerical Harmonic Analysis</em> (Birkh√§user Boston, MA, 2012).</div></dd><dt>[GQ20]</dt><dd><div>J.¬†Gallier and J.¬†Quaintance. <a href="http://link.springer.com/10.1007/978-3-030-46040-2"><em>Differential Geometry and Lie Groups: A Computational Perspective</em></a>. Vol.¬†12 of <em>Geometry and Computing</em> (<a href="https://doi.org/10.1007/978-3-030-46040-2">Springer International Publishing, Cham, 2020</a>).</div></dd><dt>[SDA21]</dt><dd><div>J.¬†Sol√†, J.¬†Deray and D.¬†Atchuthan. <a href="http://arxiv.org/abs/1812.01537"><em>A micro Lie theory for state estimation in robotics</em></a> (Dec 2021), <a href="https://arxiv.org/abs/1812.01537">arXiv:1812.01537 [cs.RO]</a>, arXiv: 1812.01537.</div></dd></dl></div><section class="footnotes is-size-7"><ul><li class="footnote" id="footnote-1"><a class="tag is-link" href="#citeref-1">1</a>Yes if all component connections are invariant separately, otherwise no</li></ul></section></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../exploring-curvature/">¬´ explore curvature without coordinates</a><a class="docs-footer-nextpage" href="../../manifolds/centeredmatrices/">Centered matrices ¬ª</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.0 on <span class="colophon-date" title="Thursday 2 January 2025 12:12">Thursday 2 January 2025</span>. Using Julia version 1.11.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
